<html>
    <head>
        <title>custom event in client side javaScript</title>
    </head>
    <body>
        <textarea id="game-console" rows="20" cols="80"></textarea>
        <script src="./event-system.js"></script>
        <script>

var player = {
    hp: 10
};

// CREATE AND ADD A 'HIT' EVENT FOR THE PLAYER OBJECT
let eventObj = {
    eventKey: 'hit',
    forDispatch: function (obj, dispatchOpt) {
        obj.hp -= dispatchOpt.damage;
        obj.hp = obj.hp < 0 ? 0 : obj.hp;
        // return an event object that will be in the listener
        return {
            target: obj, // ref to the object
            damage: dispatchOpt.damage,
            dead: obj.hp === 0
        };
    }
};
eventMod.addEvent(player, eventObj);

// ATTACH A LISTNEER FOR THE 'HIT' EVENT
eventMod.addListener(player, 'hit', function (e) {
    var el = document.querySelector('#game-console');
    if(!e.dead){
        el.value += 'The player was hit, taking ' + e.damage + ' damage.\n';
    }else{
        el.value += 'The player was hit, and has died from taking ' + e.damage + ' damage\n';
    }
});

// DISPATCH THE EVENT
eventMod.dispatch(player, 'hit', {
    damage: 3
});
// false 7
eventMod.dispatch(player, 'hit', {
    damage: 7
});
// true 0

        </script>
    </body>
</html>