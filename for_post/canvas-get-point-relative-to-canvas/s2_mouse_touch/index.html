<html>
    <head>
        <title>canvas get point relative to canvas</title>
    </head>
    <body>
        <canvas 
            id="the-canvas" 
            width="320" height="240"
            style="position:absolute;left:100px;top:100px"
        ></canvas>
        <script>
var canvas = document.getElementById('the-canvas'),
ctx = canvas.getContext('2d');

var getCanvasRelative = function (e) {
    var canvas = e.target,
    bx = canvas.getBoundingClientRect();
    return {
        x: (e.changedTouches ? e.changedTouches[0].clientX : e.clientX) - bx.left,
        y: (e.changedTouches ? e.changedTouches[0].clientY : e.clientY) - bx.top,
        bx: bx
    };
};

var drawBackground = function(ctx){
    ctx.fillStyle = 'black';
    ctx.fillRect(0,0,canvas.width, canvas.height);
};

var drawPos = function(ctx, pos){
ctx.strokeStyle = 'green';
   ctx.beginPath();
   ctx.arc(pos.x,pos.y,5,0,Math.PI*2);
   ctx.stroke();
};

var pointerHandler = function(e){
   var pos = getCanvasRelative(e);
   //console.log(pos);
   drawPos(ctx, pos);
};

drawBackground(ctx);
canvas.addEventListener('mousedown', pointerHandler);


        </script>
    </body>
</html>