 <html>
 <head>
 <title> web storage </title>
 </head>
 <body>
 <script src = "xp.js"></script>
     <script src = "game.js"></script>
    total damage:  <input id="input_total_damage" type="text"><br>
    save string: <br><textarea id="input_save_string" cols="30" rows="10"></textarea>
     <script>

// save a game object at slot of gameName
var saveStateString = function (str, saveSlot, gameName) {
    if (!str || typeof str != 'string') {
        return;
    }
    saveSlot = saveSlot === undefined ? 0 : saveSlot;
    gameName = gameName || 'game-crosshairs-save-';
    //var str = gameMod.createSaveString(game);
    localStorage.setItem(gameName + saveSlot, str);
};
// load a save string slot of gameName and return a gameObject
var loadState = function (saveSlot, gameName) {
    var str = localStorage.getItem(gameName + saveSlot);
    if (str) {
        var game = gameMod.create();
        gameMod.applySaveString(game, str);
        return game;
    }
    return false;
};

var game = loadState('0', 'game-crosshairs-save-'),
input_total_damage = document.getElementById('input_total_damage')
input_save_string = document.getElementById('input_save_string');

var render = function(){
    var str = gameMod.createSaveString(game);
    input_total_damage.value = game.totalDamage;
    input_save_string.value = str;
};


input_total_damage.addEventListener('keyup', function (e) {
    if (game) {
        game.totalDamage = e.target.value;
        render();
    }
});

input_save_string.addEventListener('keyup', function (e) {
    gameMod.applySaveString(game, e.target.value);
    render();
});

if (game) {
    input_total_damage.value = game.totalDamage;
	render();
}

 </script>
 </body>
</html>
