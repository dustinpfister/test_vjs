<html>
    <head>
        <title>Math random</title>
    </head>
    <body>
        <canvas id="the-canvas" width="320" height="240"></canvas>
        <script>

// create Classes object
var createClasses = function(opt){
    opt = opt || {};
    opt.pool = opt.pool || [];
    // get total points
    opt.totalPoints = opt.pool.reduce( function(acc, obj){ return acc + obj.points;}, 0);
    // set 0-1 numbs for each itemClasses object
    opt.pool = opt.pool.map( function(obj, i){ obj.per = obj.points / opt.totalPoints; obj.i = i; return obj; } );
    return opt;
};

var getRandomItemClass = function(classes){
    var i = 0,
    len = classes.pool.length
    roll = Math.random(),
    n = 1
    while(i < len){
        var item = classes.pool[i];
        n -= item.per;
        if(roll > n){
            return item;
        }
        i += 1;
    }
    return item;
};

var items = createClasses({pool: [
   { desc: 'Junk', points: 1000 },
   { desc: 'Common', points: 100 },
   { desc: 'Fair', points: 60 },
   { desc: 'Rare', points: 20 },
   { desc: 'Epic', points: 5}
]});
console.log(items);

console.log(getRandomItemClass(items))

var canvas = document.getElementById('the-canvas'),
ctx = canvas.getContext('2d');

// create bars array
var bars = [0,0,0,0,0],
bLen = bars.length;
var i = 0, len = 1000, bi;
while(i < len){
    //bi = Math.floor( Math.random() * bLen );
    //bi = Math.floor( getRandom(0.25) * bLen );
    var item = getRandomItemClass(items);
    bi = getRandomItemClass(items).i;
    bars[bi] = bars[bi] += 1;
    i += 1;
}

// draw bars
var max = Math.max.apply(null, bars);
ctx.fillStyle = 'lime';
bars.forEach(function(ct, i){
   var p = ct / max;
   ctx.fillRect(0, 21 * i, 320 * p, 20 )
});

/*
var dist = (function () {
    var api = function (count, w, h, method) {
        count = count === undefined ? 100 : count;
        w = w === undefined ? 320 : w;
        h = h === undefined ? 240 : h;
        method = method || api.methodOne;
        var points = [],
        i = count;
        while (i--) {
            points.push(method(i, w, h));
        }
        return points;
    };
    api.methodOne = function (i, w, h) {
        return {
            x: Math.floor(Math.random() * w),
            y: Math.floor(Math.random() * h)
        };
    };
    api.methodTwo = function (i, w, h) {
        return {
            x: Math.pow(2, Math.log(w) / Math.log(2) * Math.random()),
            y: Math.pow(2, Math.log(h) / Math.log(2) * Math.random())
        };
    };
    return api;
}
    ());


var canvas = document.getElementById('the-canvas'),
ctx = canvas.getContext('2d'),
points1 = dist(1000, 150, 200, dist.methodOne);
points2 = dist(1000, 150, 200, dist.methodTwo);

var drawPoints = function (points, ctx, fill, sx, sy) {
    ctx.fillStyle = fill || 'green';
    sx = sx === undefined ? 0 : sx;
    sy = sy === undefined ? 0 : sy;
    points.forEach(function (pt) {
        ctx.beginPath();
        ctx.arc(sx + pt.x, sy + pt.y, 5, 0, Math.PI * 2);
        ctx.fill();
    });
};

drawPoints(points1, ctx, 'red');
drawPoints(points2, ctx, 'green', 150);
*/
        </script>
    </body>
</html>