<html>
    <head>
        <title>javaScript example utils</title>
    </head>
    <body>
        <div id="canvas-app"></div>
        <script src="../lib/utils.js"></script>
        <script>
var state = {
   pointerDown: false
};
state.canvasObj = utils.createCanvas(),
canvas = state.canvasObj.canvas,
ctx = state.canvasObj.ctx,
circle = {
  x: 160,
  y: 120,
  r: 64,
  active: false,
  colorIndex: 1,
  colors: ['yellow', 'green', 'blue']
};
// draw method
var draw = function(){
    // solid black background
    ctx.fillStyle = 'black';
    ctx.fillRect(0,0,canvas.width, canvas.height);
    // the circle
    ctx.fillStyle = circle.colors[circle.colorIndex];
    ctx.beginPath();
    ctx.arc(circle.x, circle.y, circle.r, 0, Math.PI * 2);
    ctx.fill();
};
var events = {
    pointerStart: function(e, pos, state, canvasObj){
       var d = utils.distance(circle.x, circle.y, pos.x, pos.y);
       state.pointerDown = true;
       // if distance is less than or equal to circle radius step color index
       if(d <= circle.r){
           circle.active = true;
        }
        draw();
    },
    pointerMove: function(e, pos, state, canvasObj){
        if(state.pointerDown && circle.active === true){
            circle.x = pos.x;
            circle.y = pos.y;
        }
        draw();
    },
    pointerEnd: function(e, pos, state){
        state.pointerDown = false;
        circle.active = false;
    }
}
var handler = utils.canvasPointerEventHandler(state.canvasObj, state, events);
canvas.addEventListener('mousedown', handler);
canvas.addEventListener('mousemove', handler);
canvas.addEventListener('mouseup', handler);
draw();
        </script>
    </body>
</html>